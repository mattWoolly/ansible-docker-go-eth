---
- hosts: all

  tasks:
   - name: Ensure build dependencies are installed (Debian)
     package:
       name: "{{ item }}"
       state: present
     with_items:
       - build-essential
       - unzip
       - tar
       - sudo
       - docker  
   - name: Start Docker Service
     service:
      name: docker
      state: started
   - name: Create a goeth container
     docker_container:
       image: ethereum/client-go
       name: goeth 
       state: started
       privileged: true
       devices: /var/run/docker.sock:/var/run/docker.sock:rw
  roles:
   - goeth_role
